@startuml cache_performance
!theme plain
skinparam backgroundColor white

title Comparaison des Performances - Cache vs API

|Utilisateur|
start
:Ex√©cuter\n**alexa device list**;

|Syst√®me|
if (Cache m√©moire valide?) then (Oui)
  #LightGreen:Lire cache RAM;
  note right
    **‚ö° ULTRA RAPIDE**
    Latence: 1-2 ms
    Probabilit√©: 80%
    (si < 5 min)
  end note
  |Utilisateur|
  #LightGreen:Afficher 8 appareils;
  stop
else (Non)
  if (Cache disque existe?) then (Oui)
    #Yellow:Lire fichier\ndevices.json.gz;
    #Yellow:D√©compresser;
    #Yellow:Charger en m√©moire;
    note right
      **üíæ RAPIDE**
      Latence: 10-50 ms
      Probabilit√©: 19%
      (apr√®s expiration)
      **PAS DE TTL**
    end note
    |Utilisateur|
    #Yellow:Afficher 8 appareils;
    stop
  else (Non)
    #Red:Appel API Amazon;
    #Red:GET /api/devices-v2/device;
    #Red:Parser JSON;
    #Red:Sauvegarder disque;
    #Red:Sauvegarder m√©moire;
    note right
      **üåê LENT**
      Latence: 200-1000 ms
      Probabilit√©: 1%
      (premier lancement)
    end note
    |Utilisateur|
    #Red:Afficher 8 appareils;
    stop
  endif
endif

@enduml
